{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tutors Listing</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

   <style>
    body {
    background-color: #f8f9fa;
    font-family: Arial, sans-serif;
}







.navbar-brand {
    font-size: 30px;
    font-weight: bold;
    color: #007bff;
    transition: color 0.3s ease;
}

.navbar-brand:hover {
    color: #0056b3;
}

.nav-link {
    font-size: 18px;
    margin-right: 20px;
    color: #333;
    position: relative;
    transition: color 0.3s ease, transform 0.3s ease;
}

.nav-link::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
    background: #007bff;
    left: 0;
    bottom: -5px;
    transition: width 0.3s ease;
}

.nav-link:hover {
    color: #007bff;
    transform: translateY(-2px);
}

.nav-link:hover::after {
    width: 100%;
}

.nav-link.active {
    font-weight: bold;
    color: #007bff;
}

/* Post button styles */
.post-btn {
    position: fixed;
    right: 20px;
    top: 80px;
    font-size: 18px;
    padding: 10px 20px;
    background-color: #6c757d;
    color: white;
    border: none;
    border-radius: 5px;
    transition: background-color 0.3s ease, transform 0.3s ease;
}

.post-btn:hover {
    background-color: #5a6268;
    transform: scale(1.05);
}

/* Section Heading */
.section-heading {
    margin: 40px 0 20px;
    font-size: 28px;
    text-align: center;
    font-weight: bold;
    color: #007bff;
    animation: fadeInDown 1s ease;
}

@keyframes fadeInDown {
    0% {
        opacity: 0;
        transform: translateY(-20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}
.card {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s;
}

.card:hover {
    transform: translateY(-10px);
}

.card img {
    max-height: 180px;
    object-fit: cover;
}

.card-title {
    font-size: 1.25rem;
    font-weight: bold;
}

.card-body ul {
    padding-left: 0;
}

.location ul {
    padding-left: 0;
    list-style-type: none;
}
.sub{
    display: inline-block;
    border: 1px solid lightskyblue;
    padding: 5px;
    border-radius: 3px;
}
.res_box ul {
            border: 1px solid silver;
            padding: 10px;
            list-style: none;
            max-height: 150px;
            overflow-y: auto;
            background-color: white;
            border-radius: 5px;
            margin-top: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .res_box ul li {
            padding: 10px;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .res_box ul li:hover {
            background-color: #f0f0f0;
        }
        input[type=text] {
            border: 1px solid #ccc;
            outline: 0;
            background-color: transparent;
            padding: 10px;
            width: 100%;
            margin-bottom: 10px;
            border-radius: 5px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .location {
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    margin: 20px auto;
    width: 90%;
    max-width: 600px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.location h2 {
    text-align: center;
    color: #333;
    font-size: 22px;
}

.location ul {
    list-style: none;
    padding: 0;
    text-align: center;
    margin: 20px 0 0 0;
}

.location ul li {
    display: inline-block;
    margin: 10px 15px;
}

.location ul li a {
    text-decoration: none;
    color: #007bff;
    font-size: 16px;
    padding: 8px 12px;
    background-color: #e9f1ff;
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

.location ul li a:hover {
    background-color: #007bff;
    color: white;
}
.form{
    position: sticky;
    top: 0;
    z-index: 1;
}

   </style>

</head>
<body>

    
    <nav class="navbar navbar-expand-lg navbar-light " style="background-color: #bdf1fb;">
        <div class="container-fluid">
            <a class="navbar-brand " href="#">Learnersleaf</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link  " href="/myposts/{{account.email}}/">My Post</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link " href="/s_wallet/{{account.email}}">Wallet</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="/stu_settings/{{account.email}}" >Settings</a>
                    </li>
                   
                    <li class="nav-item">
                        <a class="nav-link active" href="/student_inbox/{{account.email}}">
                            <span > <i class="fa-solid fa-envelope"  style="font-size: 18px;"> </i>
                            Message</span>
                        </a>
                    </li>
                    <li class="nav-item"></li>
                        <div class="dropdown">
                            <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">
                                Find tutor
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/tutor_request">Tutor Request</a></li>
                                <li><a class="dropdown-item" href="/search_teachers/{{account.email}}">All Tutors</a></li>
                                <li><a class="dropdown-item" href="/online_tutors/{{account.email}}">Online Tutors</a></li>
                                <li><a class="dropdown-item" href="/home_tutors/{{account.email}}">Home Tutors</a></li>
                            </ul>
                        </div>
                    </li>
                    &nbsp;&nbsp;&nbsp;
                    <li class="nav-item active">
                        <div class="dropdown">
                            <div class="btn dropdown-toggle" data-bs-toggle="dropdown">
                                <i class="fa-solid fa-id-badge" style="font-size: 20px;"></i> {{accounts.name|title}}
                            </div>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="/"><i class="fa-solid fa-right-from-bracket"></i> Logout</a></li>
                                <li><a class="dropdown-item" href="/stu_settings/{{account.email}}"><i class="fa-solid fa-gear"></i> Settings</a></li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container mt-5">
        <div class="form">
        <form action="{% url 'search_teacher' %}" method="POST" class="row mb-4">
            {% csrf_token %}
            <div class="col-md-5">
                <input type="text" name="subject" class="form-control" placeholder="Subject/Skill">
            </div>
            <div class="col-md-5">
                <div class="locations">
                   
                    <input type="text" placeholder="Enter the location" id="box" autocomplete="off" name="location">
                    <div class="res_box">
                        <!-- Results will appear here -->
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary w-100">Search</button>
            </div>
        </form>
    </div>
    
    <div class="nav" style=" display: flex; justify-content:center;">
        <div class="item1" style="text-decoration: none;" style=" display: flex; justify-content:center;"> <a href="/search_teachers/{{account.email}}" style="color:#040404; font-size: 20px; text-decoration: none;text-decoration: none;">All Tutors</a></div> &nbsp;&nbsp;&nbsp;
        <div class="item2">
           <a href="/online_tutors/{{account.email}}" style="color:#007bff; font-size: 26px; text-decoration: none;text-decoration: none;">Onile Tutors</a>
        </div>  &nbsp;&nbsp;&nbsp;
        <div class="item3"> <a href="/home_tutors/{{account.email}}" style="color:#090909; font-size: 20px; text-decoration: none;text-decoration: none;">Home Tutors</a></div>
        
    </div>

    <h2 class="section-heading">Online Tutors</h2>
        <div class="row">
            {% for tutor in tutors %}
            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    {% if tutor.filename %}
                    <img src="{% static tutor.filename %}" class="card-img-top" alt="Profile Image">
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title"><a href="/s_myprofile/{{tutor.email}}/{{account.email}}">{{ tutor.name }}</a></h5>
                        <p class="card-text">{{ tutor.profile_description }}</p>
                        <ul class="list-unstyled">
                            <li><strong>Subjects:</strong> 
                          
                               <div class="sub">{{tutor.subject}}</div>
                                {% if tutor.two_subject %}
                                <div class="sub">{{tutor.two_subject}}</div>
                                {% endif %}
                                {% if tutor.three_subject %}
                                <div class="sub">{{tutor.three_subject}}</div>
                                {% endif %}
                                {% if tutor.four_subject %}
                                <div class="sub">{{tutor.four_subject}}</div>
                                {% endif%}
                                {% if tutor.five_subject %}
                                <div class="sub">{{tutor.five_subject}}</div>
                                {% endif%}
                            </li>
                         
                
                            <li><i class="fa-solid fa-location-dot" style="font-size: 20px;"></i><strong>  Location:</strong> {{ tutor.location }}</li>
                            <li><li><i class="fa-solid fa-wifi" style="font-size: 20px;"></i><strong>  Experience:</strong> {{ tutor.total_experience }} years</li>
                            <li><strong>Fees:</strong> ₹{{ tutor.min_fee }} - ₹{{ tutor.max_fee }} / {{ tutor.i_charge }}</li>
                        </ul>
                        <a href="/s_myprofile/{{tutor.email}}/{{account.email}}" class="btn btn-outline-primary">Message</a>
                        <a href="/s_myprofile/{{tutor.email}}/{{account.email}}"class="btn btn-outline-secondary">Contact</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="location mt-5">
            <h2>Filter by Location</h2>
            <ul class="list-inline">
                {% for location in locations %}
                <li class="list-inline-item"><a href="{% url 'fliter_location' location|urlencode email %}"class="btn btn-link">{{ location }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <script>
         window.onload = function() {
            const key = [
                "Chennai, Tamil Nadu", "Coimbatore, Tamil Nadu", "Madurai, Tamil Nadu", "Salem, Tamil Nadu",
                "Tiruchirappalli, Tamil Nadu", "Tirunelveli, Tamil Nadu", "Vellore, Tamil Nadu", "Erode, Tamil Nadu",
                "Kanchipuram, Tamil Nadu", "Thanjavur, Tamil Nadu", "Tiruppur, Tamil Nadu", "Nagapattinam, Tamil Nadu",
                "Kumbakonam, Tamil Nadu", "Dharmapuri, Tamil Nadu", "Karur, Tamil Nadu", "Sivakasi, Tamil Nadu",
                "Dindigul, Tamil Nadu", "Ramanathapuram, Tamil Nadu", "Tuticorin, Tamil Nadu", "Cuddalore, Tamil Nadu",
                "Vellore, Tamil Nadu", "Ariyalur, Tamil Nadu", "Perambalur, Tamil Nadu", "Nagercoil, Tamil Nadu",
                "Theni, Tamil Nadu", "Kodaikanal, Tamil Nadu", "Pollachi, Tamil Nadu", "Pudukkottai, Tamil Nadu",
                "Tiruvallur, Tamil Nadu", "Tiruvannamalai, Tamil Nadu", "Chengalpattu, Tamil Nadu", "Tirupathur, Tamil Nadu",
                "Sankarankovil, Tamil Nadu", "Kovilpatti, Tamil Nadu", "Manapparai, Tamil Nadu", "Thiruthuraipoondi, Tamil Nadu",
                "Ramanathapuram, Tamil Nadu"
            ];
            const result_box = document.querySelector('.res_box');
            const input_box = document.getElementById("box");
           
            input_box.onkeyup = function() {
                let result = [];
                let input = input_box.value;
                if (input.length) {
                    result = key.filter((keyword) => {
                        return keyword.toLowerCase().includes(input.toLowerCase());
                    });
                }
                display(result);
            };

            function display(result) {
                const content = result.map((list) => {
                    return `<li onclick="selectLocation(this)">${list}</li>`;
                });
                result_box.innerHTML = `<ul>${content.join('')}</ul>`;
            }
        };

        function selectLocation(list) {
            const input_box = document.getElementById("box");
            input_box.value = list.innerHTML;
            document.querySelector('.res_box').innerHTML = '';
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
